\chapter{Terrain Rasterizer}
\hypertarget{index}{}\label{index}\index{Terrain Rasterizer@{Terrain Rasterizer}}
\label{index_md_README}%
\Hypertarget{index_md_README}%
 \hypertarget{index_autotoc_md1}{}\doxysection{\texorpdfstring{Overview}{Overview}}\label{index_autotoc_md1}
{\bfseries{Terrain Rasterizer}} is a C++ application designed to transform raw geographic terrain data (latitude, longitude, altitude) into a visual 2D raster image. The project simulates a top-\/down view of the terrain, applying color mapping based on altitude and 3D shading to create a realistic Digital Elevation Model (DEM) visualization.\hypertarget{index_autotoc_md2}{}\doxysection{\texorpdfstring{How It Works}{How It Works}}\label{index_autotoc_md2}
The process is divided into a pipeline of distinct steps\+:


\begin{DoxyEnumerate}
\item {\bfseries{Data Loading \& Projection}}\+: The raw data usually comes in geographic coordinates (Latitude/\+Longitude). To visualize it on a flat 2D plane (like an image), we must project these spherical coordinates onto a flat surface. This project uses the {\bfseries{Lambert93}} projection (standard for France) via the PROJ library.
\item {\bfseries{Triangulation}}\+: The projected points are scattered and do not form a solid surface. To create a continuous terrain, we connect these points using {\bfseries{Delaunay Triangulation}}. This creates a "{}mesh"{} of non-\/overlapping triangles that covers the area.
\item {\bfseries{Spatial Indexing (\doxylink{classQuadTree}{Quad\+Tree})}}\+: When generating the image, we check thousands or millions of pixels. For each pixel, we need to know "{}which triangle is underneath this?"{}. Searching the entire list of triangles for every pixel is too slow. A {\bfseries{\doxylink{classQuadTree}{Quad\+Tree}}} data structure is used to divide the space into smaller regions, making this search extremely fast.
\item {\bfseries{Rasterization \& Rendering}}\+: The program iterates over every pixel in the output image\+:
\begin{DoxyItemize}
\item It finds the corresponding triangle.
\item It calculates the exact altitude of that pixel using {\bfseries{Barycentric Interpolation}} (a weighted average of the triangle\textquotesingle{}s corners).
\item It assigns a color based on altitude (using a Haxby color map).
\item It calculates lighting/shading based on the slope of the triangle to verify depth perception.
\end{DoxyItemize}
\end{DoxyEnumerate}\hypertarget{index_autotoc_md3}{}\doxysection{\texorpdfstring{Project Structure}{Project Structure}}\label{index_autotoc_md3}
Here is a breakdown of the key files and their responsibilities\+:


\begin{DoxyItemize}
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}{\ttfamily \doxylink{main_8cpp}{src/main.\+cpp}}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+: The entry point of the application. It orchestrates the entire workflow\+: reading arguments, calling the loader, running triangulation, and triggering image generation.
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}{\ttfamily \doxylink{MNT_8cpp}{src/\+MNT.\+cpp}} (Modèle Numérique de Terrain)\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+: Handles data ingestion. It reads the input text file and uses the {\bfseries{PROJ}} library to convert coordinates from WGS84 (Lat/\+Lon) to Lambert93 (X/Y meters).
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}{\ttfamily \doxylink{triangulation_8cpp}{src/triangulation.\+cpp}}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+: Contains the logic to build the mesh. It uses the {\ttfamily delaunator-\/cpp} library to perform the Delaunay triangulation on the cleaned data points.
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}{\ttfamily \doxylink{quadtree_8cpp}{src/quadtree.\+cpp}}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+: Implements the {\bfseries{\doxylink{classQuadTree}{Quad\+Tree}}} data structure. This is an optimization engine. It recursively splits the 2D space into four quadrants (NW, NE, SW, SE) to store triangles, allowing for efficient spatial queries.
\item \texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}{\ttfamily \doxylink{rasterizer_8cpp}{src/rasterizer.\+cpp}}\texorpdfstring{$\ast$}{*}\texorpdfstring{$\ast$}{*}\+: The rendering engine. It\+:
\begin{DoxyItemize}
\item Maps pixel coordinates to terrain coordinates.
\item Performs {\bfseries{Barycentric Interpolation}} to find the Z (altitude) value for any point inside a triangle.
\item Applies a {\bfseries{Haxby color map}} (Deep Blue -\/\texorpdfstring{$>$}{>} Green -\/\texorpdfstring{$>$}{>} Brown -\/\texorpdfstring{$>$}{>} White) to represent elevation.
\item Computes {\bfseries{Shading}} (Simulated Light) based on the surface normal of each triangle to give a 3D relief effect.
\item Saves the final result as a binary {\bfseries{PPM}} image.
\end{DoxyItemize}
\end{DoxyItemize}\hypertarget{index_autotoc_md4}{}\doxysection{\texorpdfstring{Building the Project}{Building the Project}}\label{index_autotoc_md4}
This project uses {\bfseries{CMake}}. Ensure you have CMake, a C++ compiler, and the {\bfseries{PROJ}} library installed on your system.\hypertarget{index_autotoc_md5}{}\doxysubsection{\texorpdfstring{Prerequisites (\+Linux)}{Prerequisites (Linux)}}\label{index_autotoc_md5}

\begin{DoxyCode}{0}
\DoxyCodeLine{sudo\ apt-\/get\ install\ cmake\ g++\ libproj-\/dev}

\end{DoxyCode}
\hypertarget{index_autotoc_md6}{}\doxysubsection{\texorpdfstring{Compilation}{Compilation}}\label{index_autotoc_md6}
Run the provided build script or use standard CMake commands\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{\#\ Using\ the\ helper\ script}
\DoxyCodeLine{./build.sh}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ OR\ manually}
\DoxyCodeLine{mkdir\ build}
\DoxyCodeLine{cd\ build}
\DoxyCodeLine{cmake\ ..}
\DoxyCodeLine{make}

\end{DoxyCode}
\hypertarget{index_autotoc_md7}{}\doxysection{\texorpdfstring{Usage}{Usage}}\label{index_autotoc_md7}
Run the executable {\ttfamily create\+\_\+raster} with the path to your data file and the desired image width.


\begin{DoxyCode}{0}
\DoxyCodeLine{./build/create\_raster\ <path\_to\_data\_file>\ <image\_width>}

\end{DoxyCode}


{\bfseries{Example\+:}} 
\begin{DoxyCode}{0}
\DoxyCodeLine{./build/create\_raster\ data/terrain\_data.txt\ 1000}

\end{DoxyCode}
 This command will read {\ttfamily data/terrain\+\_\+data.\+txt}, generate a 1000-\/pixel wide image, and save it as {\ttfamily output.\+ppm}.\hypertarget{index_autotoc_md8}{}\doxysection{\texorpdfstring{Output}{Output}}\label{index_autotoc_md8}
The program produces a file named {\ttfamily output.\+ppm} in the working directory. A PPM (Portable Pixel Map) file can be opened by most image viewers (like GIMP, Irfan\+View, or standard Linux image viewers). 